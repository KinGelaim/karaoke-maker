<UserControl x:Class="KaraokeMakerWPF.Components.StepByStepControl.Views.StepByStep"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:KaraokeMakerWPF.Components.StepByStepControl.Views"
             xmlns:localModel="clr-namespace:KaraokeMakerWPF.Components.StepByStepControl.Models"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <UserControl.Resources>
        <SolidColorBrush x:Key="ForegroundColor" Color="#ffffff"/>
        <SolidColorBrush x:Key="BackgroundColor" Color="#e3e3e3"/>
        <SolidColorBrush x:Key="BackgroundFillColor" Color="#35a4e9"/>

        <ControlTemplate
            x:Key="ControlTemplate"
            TargetType="{x:Type ItemsControl}"
        >
            <Border
                Padding="0"
                SnapsToDevicePixels="true"
            >
                <UniformGrid Rows="1" IsItemsHost="True"/>
            </Border>
        </ControlTemplate>

        <DataTemplate x:Key="DataTemplate">
            <DataTemplate.Resources>
                <Style TargetType="Path" x:Key="Path">
                    <Setter Property="Data" Value="M0.0,0.0 L0.0,0.1 L1.0,0.1 L1.0,0.00 L0.0,0.0"/>
                    <Setter Property="StrokeThickness" Value="0"/>
                    <Setter Property="Height" Value="9"/>
                    <Setter Property="Stretch" Value="Fill"/>
                    <Setter Property="Visibility" Value="Hidden"/>
                </Style>

                <Style TargetType="Ellipse" x:Key="Circle">
                    <Setter Property="HorizontalAlignment" Value="Center"/>
                    <Setter Property="Height" Value="25"/>
                    <Setter Property="Width" Value="25"/>
                    <Setter Property="Stroke" Value="Transparent"/>
                    <Setter Property="Visibility" Value="Hidden"/>
                </Style>

                <Style TargetType="Ellipse" x:Key="OuterCircle">
                    <Setter Property="HorizontalAlignment" Value="Center"/>
                    <Setter Property="Height" Value="35"/>
                    <Setter Property="Width" Value="35"/>
                    <Setter Property="Stroke" Value="Transparent"/>
                    <Setter Property="Visibility" Value="Hidden"/>
                </Style>
            </DataTemplate.Resources>

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>

                <Path x:Name="FilledLeftPath" Grid.Column="0" Style="{StaticResource Path}" Fill="{StaticResource BackgroundFillColor}"/>
                <Path x:Name="FilledRightPath" Grid.Column="1" Style="{StaticResource Path}" Fill="{StaticResource BackgroundFillColor}"/>

                <Path x:Name="EmptyLeftPath" Grid.Column="0" Style="{StaticResource Path}" Fill="{StaticResource BackgroundColor}"/>
                <Path x:Name="EmptyRightPath" Grid.Column="1" Style="{StaticResource Path}" Fill="{StaticResource BackgroundColor}"/>

                <Ellipse x:Name="FillCircle" Grid.ColumnSpan="2" Style="{StaticResource Circle}" Fill="{StaticResource BackgroundFillColor}"/>
                <Ellipse x:Name="EmptyCircle" Grid.ColumnSpan="2" Style="{StaticResource Circle}" Fill="{StaticResource BackgroundColor}"/>

                <Ellipse x:Name="CurrentOuterCircle" Grid.ColumnSpan="2" Style="{StaticResource OuterCircle}" Fill="{StaticResource BackgroundFillColor}"/>
                <Ellipse x:Name="CurrentInnerCircle" Grid.ColumnSpan="2" Style="{StaticResource Circle}" Fill="{StaticResource ForegroundColor}"/>
                <TextBlock x:Name="DisplayNumber" Grid.ColumnSpan="2" Text="{Binding DisplayNumber}" TextAlignment="Center" HorizontalAlignment="Center" FontSize="14" Margin="0,7,0,0" FontWeight="Bold"/>

                <TextBlock x:Name="DisplayName" Grid.ColumnSpan="2" Grid.Row="1" Text="{Binding DisplayName}" TextAlignment="Center" HorizontalAlignment="Center" FontSize="16"/>
            </Grid>

            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding LeftPath}" Value="{x:Static localModel:StepStatus.Previous}">
                    <Setter TargetName="FilledLeftPath" Property="Visibility" Value="Visible"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding RightPath}" Value="{x:Static localModel:StepStatus.Previous}">
                    <Setter TargetName="FilledRightPath" Property="Visibility" Value="Visible"/>
                </DataTrigger>

                <DataTrigger Binding="{Binding LeftPath}" Value="{x:Static localModel:StepStatus.Next}">
                    <Setter TargetName="EmptyLeftPath" Property="Visibility" Value="Visible"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding RightPath}" Value="{x:Static localModel:StepStatus.Next}">
                    <Setter TargetName="EmptyRightPath" Property="Visibility" Value="Visible"/>
                </DataTrigger>

                <DataTrigger Binding="{Binding Circle}" Value="{x:Static localModel:StepStatus.Previous}">
                    <Setter TargetName="FillCircle" Property="Visibility" Value="Visible"/>
                    <Setter TargetName="DisplayNumber" Property="Foreground" Value="{StaticResource ForegroundColor}"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding Circle}" Value="{x:Static localModel:StepStatus.Active}">
                    <Setter TargetName="CurrentOuterCircle" Property="Visibility" Value="Visible"/>
                    <Setter TargetName="CurrentInnerCircle" Property="Visibility" Value="Visible"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding Circle}" Value="{x:Static localModel:StepStatus.Next}">
                    <Setter TargetName="EmptyCircle" Property="Visibility" Value="Visible"/>
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>
    </UserControl.Resources>

    <Grid>
        <ItemsControl
            x:Name="Items"
            Template="{StaticResource ControlTemplate}"
            ItemTemplate="{StaticResource DataTemplate}"
        />
    </Grid>
</UserControl>